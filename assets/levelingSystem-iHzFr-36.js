import{s as c}from"./index-D9POxQTI.js";const l=[0,100,250,500,800,1200,1700,2300,3e3,5e3],d=o=>{for(let e=l.length-1;e>=0;e--)if(o>=l[e])return e+1;return 1},f=async(o,e,i="")=>{try{const{data:r,error:s}=await c.from("profiles").select("points, level").eq("user_id",o).single();if(s)return console.error("Error fetching profile:",s),{success:!1,error:s.message};const t=((r==null?void 0:r.points)||0)+e,n=d(t),u=n>((r==null?void 0:r.level)||1),{error:a}=await c.from("profiles").update({points:t,level:n,updated_at:new Date().toISOString()}).eq("user_id",o);return a?(console.error("Error updating profile:",a),{success:!1,error:a.message}):(console.log(`Awarded ${e} points to user ${o}. Reason: ${i}`),{success:!0,newPoints:t,newLevel:n,leveledUp:u,pointsAwarded:e})}catch(r){return console.error("Error in awardPoints:",r),{success:!1,error:"Failed to award points"}}};export{l as LEVEL_THRESHOLDS,f as awardPoints,d as calculateLevel};
